# 💻 캐시 메모리

---
***속도가 빠른 장치와 느린장치에서의 속도차이에 따른 병목현상을 줄이기 위한 '메모리'***
- ex) CPU 코어 <-> 메모리 병목현상 완화
- ex) 웹 브라우저 캐시파일은 하드디스크 웹페이지 사이의 병목현상을 완화

## 1. ✅ 캐시 메모리 구성
**쉽게 설명해 CPU가 주기억장치에서 데이터를 갖고와서 쓸때 '자주쓰는 데이터' 를 캐시 메모리에 저장한 뒤 
다음에 이용할때 주기억 장치가 아닌 '캐시 메모리'에서 데이터를 갖고오면 속도가 증가한다.**

--> 하지만 비용이 비싸고 용량이 적은 단점이 존재한다.

- CPU에는 이러한 캐시메모리가 2-3개 정도 존재한다 (L1, L2, L3) 
  - L1부터 사용을 하고 만약 못찾으면 L2.. L3.. 이런 식으로 사용한다.
  
- ex) 듀얼 코어 프로세서의 캐시 메모리 : 각 코어마다 독립적인 L1 캐시메모리를 갖는다. 그리고 두 코어가 공유하는 L2캐시 메모리가 내장된다.
  - 독립적인 L1캐시가 128kb라면 64/64씩 나누어서 I/D-Cache로 나누어 명령어를 처리하기 직전의 명령어를 저장하고, 나머지에는 실행후 명령어를 임시저장한다.
    - L1 : CPU 내부에 존재
    - L2 : CPU와 RAM사이에 존재
    - L3 : CPU전체 또는 메인보드에 존재
    - 디스크 캐시 : RAM과 하드디스크 사이에 존재하는 캐시 

## 2. ✅ 캐시 메모리의 작동 원리
- ***시간 지역성***
  - 계속 반복되어서 사용되는 데이터는 잠시 후 또 사용될 가능성이 높다.
- ***공간 지역성***
  - 일정한 간격으로 연속된 데이터가 사용되면 참조된 근처 데이터가 사용될 가능성이 높다.

- !! 이처럼 캐시 데이터를 저장할때는 그 값만 저장하는게 아니라 공간지역성을 최대한 활용하기 위해 주변 데이터도 저장한다.

### Cache Miss 3가지
- ***CPU가 요청한 데이터가 캐시에 있으면 'Cache Hit' 없어서 DRAM에서 갖고오면 'Cache Miss'***
1. Cold Miss
    - 해당 메모리 주소를 처음 불러서 발생하는 미스
2. Conflict Miss
   - 캐시 메모리에 A와 B데이터를 저장해야하는데, A와 B가 같은 캐시 메모리 주소에 할당 되어있어서 발생하는 미스
   - 주소 할당 문제
3. Capacity Miss
   - 캐시 메모리 공간이 부족해서 발생하는 미스

## 3. ✅ 구조 및 작동 방식

- ### Direct Mapped Cache
- ***하나의 메모리 블록이 특정 캐시 라인만 저장될 수 있는 방(단순하지만 충돌 많음)***
- 정해진 구역에만 저장할 수 있다. 저장 할 공간이 한정되어있어 'Conflict Miss'가 많이 발생한다.
- 조회는 빠르지만 저장이 한정적이다.
- ++) 캐시메모리는 인덱스 필드 + 태그 필드 + 데이터 필드로 구성되어있다.

- ### Fully Associative Cache
- ***모든 메모리 블록이 캐시의 아무라인에 저장 될 수 있는 방식(유연하지만 느림)***
- 저장할떄는 Good! 근데 찾을때가 문제이다!
- 조건이나 규칙이 없어서 특정 캐시 Set 안에 있는 모든 데이터를 찾아 원하는 데이터가 있는지 검색해야한다.

- ### Set Associative Cache
- ***메모리를 여러개의 집합의로 나누고, 각 블록은 특정 집합 안의 아무 라인에 저장할 수 있는 방식(위 두 방식을 타협한 방식)***
- Direct + Fully 방식으로 Direct보단 검색이 느리고 Fully보단 저장이 느리지만 중간형이다.
---

# 🤔 질문

### 1. L1, L2, L3 캐시가 위치하는 곳에 대해서 설명하시오
- L1 : CPU 내부
- L2 : CPU와 RAM사이에 존재
- L3 : CPU전체 또는 메인보드에 존재

### 2. Cache Miss 3가지를 서술하시오
- Cold Miss : 처음 호출해서 발생하는 미스
- Conflict Miss : 주소 할당 문제 미스
- Capacity Miss : 메모리 공간 부족해서 발생하는 미스

### 3. Set Associative Cache 방식에 대해서 서술하시오.
- Direct Mapped 방식보단 조회가 느리고, Fully Associative 방식보다는 저장이 느리지만, 두 방식의 단점을 보완한 타협적인 방식이다.
- 특정 행을 정하고 그 특정행에 Fully 방식으로 저장하는 것이다.


